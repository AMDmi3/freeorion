//CORRESPONDING MAX TROOP, DEFENSE, & SHIELD VALUES ARE SPECIFIED IN SPECIES
Tech
    name = "DEF_ROOT_DEFENSE"
    description = "DEF_ROOT_DEFENSE_DESC"
    short_description = "TROOPS_SHORT_DESC"
    category = "DEFENSE_CATEGORY"
    researchcost = 1
    researchturns = 1
    graphic = ""

Tech
    name = "DEF_PLANET_CLOAK"
    description = "DEF_PLANET_CLOAK_DESC"
    short_description = "BUILDING_UNLOCK_SHORT_DESC"
    category = "DEFENSE_CATEGORY"
    researchcost = 9999
    researchturns = 9999
    Unresearchable
    prerequisites = "SPY_STEALTH_3"
    unlock = Item type = Building name = "BLD_PLANET_CLOAK"

Tech
    name = "DEF_SYST_DEF_MINE_1"
    description = "DEF_SYST_DEF_MINE_1_DESC"
    short_description = "DEFENSE_SHORT_DESC"
    category = "DEFENSE_CATEGORY"
    researchcost = 120 * [[TECH_COST_MULTIPLIER]]
    researchturns = 4
    prerequisites = "DEF_DEFENSE_NET_1"
    effectsgroups = [
        EffectsGroup
            scope = And [
                Ship
                ContainedBy And [
                    System 
                    Contains And [
                        Planet
                        OwnedBy empire = Source.Owner
                        Not HasSpecial name = "FORTRESS_SPECIAL"
                    ]
                ]
                Or [
                    OwnedBy affiliation = EnemyOf empire = Source.Owner
                    Unowned
                ]
            ]
            activation = Not OwnerHasTech name = "DEF_SYST_DEF_MINE_2"
            effects = SetStructure value = Value - 2
        EffectsGroup
            scope = And [
                Fleet
                ContainedBy And [
                    System 
                    Contains And [
                        Planet
                        OwnedBy empire = Source.Owner
                        Not HasSpecial name = "FORTRESS_SPECIAL"
                    ]
                ]
                OwnedBy affiliation = EnemyOf empire = Source.Owner
            ]
            activation = Not OwnerHasTech name = "DEF_SYST_DEF_MINE_2"
            effects = [
                GenerateSitRepMessage
                    message = "EFFECT_MINES"
                    icon = "icons/sitrep/combat_damage.png"
                    parameters = [
                        tag = "empire" data = Target.Owner
                        tag = "fleet" data = Target.ID
                        tag = "rawtext" data = "2"
                        tag = "system" data = Target.SystemID
                    ]
                    empire = Target.Owner
            ]
        EffectsGroup
            scope = And [
                Ship
                ContainedBy And [
                    System 
                    Contains And [
                        Planet
                        OwnedBy empire = Source.Owner
                        Not HasSpecial name = "FORTRESS_SPECIAL"
                    ]
                ]
                OwnedBy affiliation = EnemyOf empire = Source.Owner
                Structure high = 2
            ]
            activation = Not OwnerHasTech name = "DEF_SYST_DEF_MINE_2"
            effects = [
                GenerateSitRepMessage
                    message = "EFFECT_MINES_SHIP_DESTROYED"
                    icon = "icons/sitrep/combat_destroyed.png"
                    parameters = [
                        tag = "empire" data = Target.Owner
                        tag = "ship" data = Target.ID
                        tag = "system" data = Target.SystemID
                    ]
                    empire = Target.Owner
                Destroy
            ]
    ]
    graphic = "icons/tech/system_defense_mines.png"

Tech
    name = "DEF_SYST_DEF_MINE_2"
    description = "DEF_SYST_DEF_MINE_2_DESC"
    short_description = "DEFENSE_SHORT_DESC"
    category = "DEFENSE_CATEGORY"
    researchcost = 240 * [[TECH_COST_MULTIPLIER]]
    researchturns = 6
    prerequisites = "DEF_SYST_DEF_MINE_1"
    effectsgroups = [
        EffectsGroup
            scope = And [
                Ship
                ContainedBy And [
                    System 
                    Contains And [
                        Planet
                        OwnedBy empire = Source.Owner
                    ]
                ]
                Or [
                    OwnedBy affiliation = EnemyOf empire = Source.Owner
                    Unowned
                ]
            ]
            activation = Not OwnerHasTech name = "DEF_SYST_DEF_MINE_3"
            effects = SetStructure value = Value - 6
        EffectsGroup
            scope = And [
                Fleet
                ContainedBy And [
                    System 
                    Contains And [
                        Planet
                        OwnedBy empire = Source.Owner
                    ]
                ]
                OwnedBy affiliation = EnemyOf empire = Source.Owner
            ]
            activation = Not OwnerHasTech name = "DEF_SYST_DEF_MINE_3"
            effects = [
                GenerateSitRepMessage
                    message = "EFFECT_MINES"
                    icon = "icons/sitrep/combat_damage.png"
                    parameters = [
                        tag = "empire" data = Target.Owner
                        tag = "fleet" data = Target.ID
                        tag = "rawtext" data = "6"
                        tag = "system" data = Target.SystemID
                    ]
                    empire = Target.Owner
            ]
        EffectsGroup
            scope = And [
                Ship
                ContainedBy And [
                    System 
                    Contains And [
                        Planet
                        OwnedBy empire = Source.Owner
                    ]
                ]
                OwnedBy affiliation = EnemyOf empire = Source.Owner
                Structure high = 6
            ]
            activation = Not OwnerHasTech name = "DEF_SYST_DEF_MINE_3"
            effects = [
                GenerateSitRepMessage
                    message = "EFFECT_MINES_SHIP_DESTROYED"
                    icon = "icons/sitrep/combat_destroyed.png"
                    parameters = [
                        tag = "empire" data = Target.Owner
                        tag = "ship" data = Target.ID
                        tag = "system" data = Target.SystemID
                    ]
                    empire = Target.Owner
                Destroy
            ]
    ]
    graphic = "icons/tech/system_defense_mines.png"

Tech
    name = "DEF_SYST_DEF_MINE_3"
    description = "DEF_SYST_DEF_MINE_3_DESC"
    short_description = "DEFENSE_SHORT_DESC"
    category = "DEFENSE_CATEGORY"
    researchcost = 500 * [[TECH_COST_MULTIPLIER]]
    researchturns = 8
    prerequisites = "DEF_SYST_DEF_MINE_2"
    effectsgroups = [
        EffectsGroup
            scope = And [
                Ship
                ContainedBy And [
                    System 
                    Contains And [
                        Planet
                        OwnedBy empire = Source.Owner
                    ]
                ]
                Or [
                    OwnedBy affiliation = EnemyOf empire = Source.Owner
                    Unowned
                ]
            ]
            effects = SetStructure value = Value - 14
        EffectsGroup
            scope = And [
                Fleet
                ContainedBy And [
                    System 
                    Contains And [
                        Planet
                        OwnedBy empire = Source.Owner
                    ]
                ]
                OwnedBy affiliation = EnemyOf empire = Source.Owner
            ]
            effects = [
                GenerateSitRepMessage
                    message = "EFFECT_MINES"
                    icon = "icons/sitrep/combat_damage.png"
                    parameters = [
                        tag = "empire" data = Target.Owner
                        tag = "fleet" data = Target.ID
                        tag = "rawtext" data = "14"
                        tag = "system" data = Target.SystemID
                    ]
                    empire = Target.Owner
            ]
        EffectsGroup
            scope = And [
                Ship
                ContainedBy And [
                    System 
                    Contains And [
                        Planet
                        OwnedBy empire = Source.Owner
                    ]
                ]
                OwnedBy affiliation = EnemyOf empire = Source.Owner
                Structure high = 14
            ]
            effects = [
                GenerateSitRepMessage
                    message = "EFFECT_MINES_SHIP_DESTROYED"
                    icon = "icons/sitrep/combat_destroyed.png"
                    parameters = [
                        tag = "empire" data = Target.Owner
                        tag = "ship" data = Target.ID
                        tag = "system" data = Target.SystemID
                    ]
                    empire = Target.Owner
                Destroy
            ]
    ]
    graphic = "icons/tech/system_defense_mines.png"

#include "/scripting/common/base_prod.macros"
